(function(){const b=document.createElement("link").relList;if(b&&b.supports&&b.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))e(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function a(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(c){if(c.ep)return;c.ep=!0;const r=a(c);fetch(c.href,r)}})();var F={lunarInfo:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,92821,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],solarMonth:[31,28,31,30,31,30,31,31,30,31,30,31],Gan:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],Zhi:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],Animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],festival:{"1-1":{title:"元旦节"},"2-14":{title:"情人节"},"5-1":{title:"劳动节"},"5-4":{title:"青年节"},"6-1":{title:"儿童节"},"9-10":{title:"教师节"},"10-1":{title:"国庆节"},"12-25":{title:"圣诞节"},"3-8":{title:"妇女节"},"3-12":{title:"植树节"},"4-1":{title:"愚人节"},"5-12":{title:"护士节"},"7-1":{title:"建党节"},"8-1":{title:"建军节"},"12-24":{title:"平安夜"}},lFestival:{"12-30":{title:"除夕"},"1-1":{title:"春节"},"1-15":{title:"元宵节"},"2-2":{title:"龙抬头"},"5-5":{title:"端午节"},"7-7":{title:"七夕节"},"7-15":{title:"中元节"},"8-15":{title:"中秋节"},"9-9":{title:"重阳节"},"10-1":{title:"寒衣节"},"10-15":{title:"下元节"},"12-8":{title:"腊八节"},"12-23":{title:"北方小年"},"12-24":{title:"南方小年"}},getFestival(){return this.festival},getLunarFestival(){return this.lFestival},setFestival(f={}){this.festival=f},setLunarFestival(f={}){this.lFestival=f},timeToEarthlyBranch:function(f){const[b]=f.split(":").map(Number);let a,e;switch(!0){case(b>=23||b<1):a="子",e=1;break;case(b>=1&&b<3):a="丑",e=2;break;case(b>=3&&b<5):a="寅",e=3;break;case(b>=5&&b<7):a="卯",e=4;break;case(b>=7&&b<9):a="辰",e=5;break;case(b>=9&&b<11):a="巳",e=6;break;case(b>=11&&b<13):a="午",e=7;break;case(b>=13&&b<15):a="未",e=8;break;case(b>=15&&b<17):a="申",e=9;break;case(b>=17&&b<19):a="酉",e=10;break;case(b>=19&&b<21):a="戌",e=11;break;case(b>=21&&b<23):a="亥",e=12;break;default:a="未知",e=0}return{branchName:a,branchIndex:e}},solarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],sTermInfo:["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],nStr1:["日","一","二","三","四","五","六","七","八","九","十"],nStr2:["初","十","廿","卅"],nStr3:["正","二","三","四","五","六","七","八","九","十","冬","腊"],lYearDays:function(f){let b,a=348;for(b=32768;b>8;b>>=1)a+=this.lunarInfo[f-1900]&b?1:0;return a+this.leapDays(f)},leapMonth:function(f){return this.lunarInfo[f-1900]&15},leapDays:function(f){return this.leapMonth(f)?this.lunarInfo[f-1900]&65536?30:29:0},monthDays:function(f,b){return b>12||b<1?-1:this.lunarInfo[f-1900]&65536>>b?30:29},solarDays:function(f,b){if(b>12||b<1)return-1;var a=b-1;return a==1?f%4==0&&f%100!=0||f%400==0?29:28:this.solarMonth[a]},toGanZhiYear:function(f){var b=(f-3)%10,a=(f-3)%12;return b==0&&(b=10),a==0&&(a=12),this.Gan[b-1]+this.Zhi[a-1]},toAstro:function(f,b){var a="魔羯水瓶双鱼白羊金牛双子巨蟹狮子处女天秤天蝎射手魔羯",e=[20,19,21,21,21,22,23,23,23,23,22,22];return a.substr(f*2-(b<e[f-1]?2:0),2)+"座"},toGanZhi:function(f){return this.Gan[f%10]+this.Zhi[f%12]},getTerm:function(f,b){if(f<1900||f>2100||b<1||b>24)return-1;var a=this.sTermInfo[f-1900],e=[parseInt("0x"+a.substr(0,5)).toString(),parseInt("0x"+a.substr(5,5)).toString(),parseInt("0x"+a.substr(10,5)).toString(),parseInt("0x"+a.substr(15,5)).toString(),parseInt("0x"+a.substr(20,5)).toString(),parseInt("0x"+a.substr(25,5)).toString()],c=[e[0].substr(0,1),e[0].substr(1,2),e[0].substr(3,1),e[0].substr(4,2),e[1].substr(0,1),e[1].substr(1,2),e[1].substr(3,1),e[1].substr(4,2),e[2].substr(0,1),e[2].substr(1,2),e[2].substr(3,1),e[2].substr(4,2),e[3].substr(0,1),e[3].substr(1,2),e[3].substr(3,1),e[3].substr(4,2),e[4].substr(0,1),e[4].substr(1,2),e[4].substr(3,1),e[4].substr(4,2),e[5].substr(0,1),e[5].substr(1,2),e[5].substr(3,1),e[5].substr(4,2)];return parseInt(c[b-1])},toChinaMonth:function(f){if(f>12||f<1)return-1;var b=this.nStr3[f-1];return b+="月",b},toChinaDay:function(f){var b;switch(f){case 10:b="初十";break;case 20:b="二十";break;case 30:b="三十";break;default:b=this.nStr2[Math.floor(f/10)],b+=this.nStr1[f%10]}return b},getAnimal:function(f){return this.Animals[(f-4)%12]},solar2lunar:function(f,b,a){if(n=parseInt(f),t=parseInt(b),s=parseInt(a),n<1900||n>2100||n==1900&&t==1&&s<31)return-1;if(n)var e=new Date(n,parseInt(t)-1,s);else var e=new Date;var c,x=0,r=0,n=e.getFullYear(),t=e.getMonth()+1,s=e.getDate(),u=(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())-Date.UTC(1900,0,31))/864e5;for(c=1900;c<2101&&u>0;c++)r=this.lYearDays(c),u-=r;u<0&&(u+=r,c--);var o=new Date,h=!1;o.getFullYear()==n&&o.getMonth()+1==t&&o.getDate()==s&&(h=!0);var d=e.getDay(),g=this.nStr1[d];d==0&&(d=7);var i=c,x=this.leapMonth(c),l=!1;for(c=1;c<13&&u>0;c++)x>0&&c==x+1&&l==!1?(--c,l=!0,r=this.leapDays(i)):r=this.monthDays(i,c),l==!0&&c==x+1&&(l=!1),u-=r;u==0&&x>0&&c==x+1&&(l?l=!1:(l=!0,--c)),u<0&&(u+=r,--c);var m=c,y=u+1,A=t-1,C=this.toGanZhiYear(i),I=this.getTerm(n,t*2-1),O=this.getTerm(n,t*2),S=this.toGanZhi((n-1900)*12+t+11);s>=I&&(S=this.toGanZhi((n-1900)*12+t+12));var p=!1,D=null;I==s&&(p=!0,D=this.solarTerm[t*2-2]),O==s&&(p=!0,D=this.solarTerm[t*2-1]);var z=Date.UTC(n,A,1,0,0,0,0)/864e5+25567+10,G=this.toGanZhi(z+s-1),Z=this.toAstro(t,s),E=n+"-"+t+"-"+s,L=i+"-"+m+"-"+y,k=this.festival,T=this.lFestival,N=t+"-"+s,M=m+"-"+y;return{date:E,lunarDate:L,festival:k[N]?k[N].title:null,lunarFestival:T[M]?T[M].title:null,lYear:i,lMonth:m,lDay:y,Animal:this.getAnimal(i),IMonthCn:(l?"闰":"")+this.toChinaMonth(m),IDayCn:this.toChinaDay(y),cYear:n,cMonth:t,cDay:s,gzYear:C,gzMonth:S,gzDay:G,isToday:h,isLeap:l,nWeek:d,ncWeek:"星期"+g,isTerm:p,Term:D,astro:Z}},lunar2solar:function(f,b,a,e){f=parseInt(f),b=parseInt(b),a=parseInt(a),e=!!e;var c=this.leapMonth(f);if(this.leapDays(f),e&&c!=b||f==2100&&b==12&&a>1||f==1900&&b==1&&a<31)return-1;if(f===1988&&b===4&&a===18&&!e)return this.solar2lunar(1988,6,2);var r=this.monthDays(f,b),n=r;if(e&&(n=this.leapDays(f,b)),f<1900||f>2100||a>n)return-1;for(var t=0,s=1900;s<f;s++)t+=this.lYearDays(s);for(var u=0,o=!1,s=1;s<b;s++)u=this.leapMonth(f),o||u<=s&&u>0&&(t+=this.leapDays(f),o=!0),t+=this.monthDays(f,s);e&&(t+=r);var h=Date.UTC(1900,1,30,0,0,0),d=new Date((t+a-31)*864e5+h),g=d.getUTCFullYear(),i=d.getUTCMonth()+1,x=d.getUTCDate();return this.solar2lunar(g,i,x)}};function U(f,b,a){const[e,c,r]=f.split("-").map(Number),[n]=b.split(":").map(Number);var t;switch(console.log("t",b),a){case"solar":console.log("执行公历转农历"),t=$(e,c,r),console.log(t);break;case"lunar":console.log("执行农历转公历"),t=H(e,c,r),console.log(t);break}const s=["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],o=(e-4)%12,h=s[o];let d=J(b);return console.log(d),{age:`${new Date().getFullYear()-t.lyear+1}岁`,zodiac:h,zodiacIndex:o,birthHour:`${d.branchName}时`,solarDate:`${t.cyear}年${t.cmonth}月${t.cday}日`,lunarDate:`${t.lyear}年${t.lmonth}月${t.lday}日`,birthNum:d.branchIndex,lYear:t.lyear,lMonth:t.lmonth,lDay:t.lday,hour:n,cYear:t.cyear,cMonth:t.cmonth,cDay:t.cday}}function $(f,b,a){let e=F.solar2lunar(f,b,a);return console.log("公历转农历"),console.log(e),{lyear:e.lYear,lmonth:e.lMonth,lday:e.lDay,cyear:e.cYear,cmonth:e.cMonth,cday:e.cDay}}function H(f,b,a){let e=F.lunar2solar(f,b,a);return console.log("农历转阳历"),console.log(e),{lyear:e.lYear,lmonth:e.lMonth,lday:e.lDay,cyear:e.cYear,cmonth:e.cMonth,cday:e.cDay}}function J(f){const[b]=f.split(":").map(Number);let a,e;switch(!0){case(b>=23||b<1):a="子",e=1;break;case(b>=1&&b<3):a="丑",e=2;break;case(b>=3&&b<5):a="寅",e=3;break;case(b>=5&&b<7):a="卯",e=4;break;case(b>=7&&b<9):a="辰",e=5;break;case(b>=9&&b<11):a="巳",e=6;break;case(b>=11&&b<13):a="午",e=7;break;case(b>=13&&b<15):a="未",e=8;break;case(b>=15&&b<17):a="申",e=9;break;case(b>=17&&b<19):a="酉",e=10;break;case(b>=19&&b<21):a="戌",e=11;break;case(b>=21&&b<23):a="亥",e=12;break;default:a="未知"}return{branchName:a,branchIndex:e}}const v={currentUser:null,history:[],settings:{theme:"dark",notification:!0}};function R(){B(),P()}function B(){const f=localStorage.getItem("damo-history");f&&(v.history=JSON.parse(f))}function P(){var f;(f=document.getElementById("fortune-form"))==null||f.addEventListener("submit",W),document.querySelectorAll(".history-item").forEach(b=>{b.addEventListener("click",()=>K(b.dataset.id))})}function W(f){f.preventDefault(),console.log("表单提交事件触发");const b=new FormData(f.target),a=b.get("birth-date"),e=b.get("birth-time"),c=b.get("location"),r=b.get("gender"),n=b.get("calendarType");if(console.log("表单数据:",{birthDate:a,birthTime:e,location:c,gender:r,calendarType:n}),!a||!e||!c){console.log("验证失败: 缺少必填字段"),Y("请填写完整的生辰信息");return}a.split("-").map(Number),e.split(":").map(Number);try{let t=U(a,e,n);console.log(t);const s={id:Date.now(),date:new Date().toISOString(),birthDate:a,birthTime:e,location:c,gender:r,data:t};console.log(s),_(s),w(s)}catch(t){console.error("排盘错误:",t),Y("排盘失败，请检查输入信息")}}function _(f){v.history.unshift(f),localStorage.setItem("damo-history",JSON.stringify(v.history)),console.log("结果已保存:",f.id)}function w(f){console.log("准备跳转到结果页，ID:",f.id),window.location.href="/pages/result.html?id="+f.id}function K(f){const b=v.history.find(a=>a.id===Number(f));b&&w(b)}function Y(f){alert(f)}function q(f){const a=JSON.parse(localStorage.getItem("damo-history")||"[]").filter(e=>e.id!==Number(f));return localStorage.setItem("damo-history",JSON.stringify(a)),a}function Q(){return JSON.parse(localStorage.getItem("damo-history")||"[]")}function V(f){return JSON.parse(localStorage.getItem("damo-history")||"[]").find(a=>a.id===Number(f))}export{Q as a,q as d,V as g,R as i};
